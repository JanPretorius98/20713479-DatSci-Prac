"0","# Aggregate the data and calculate cumulative cases and deaths"
"0","df_covid_cumulative <- df_covid %>%"
"0","    filter(!is.na(continent)) %>%"
"0","    group_by(continent, date) %>%"
"0","    summarise("
"0","        new_cases = sum(new_cases, na.rm = TRUE),"
"0","        new_deaths = sum(new_deaths, na.rm = TRUE),"
"0","        .groups = ""drop"""
"0","    ) %>%"
"0","    arrange(continent, date) %>%"
"0","    group_by(continent) %>%"
"0","    mutate("
"0","        total_cases = cumsum(new_cases),"
"0","        total_deaths = cumsum(new_deaths),"
"0","        death_proportion = total_deaths / total_cases"
"0","    )"
"0",""
"0","# Convert from wide to long format for plotting"
"0","df_prop <- df_covid_cumulative %>%"
"0","    pivot_longer(cols = c(total_cases, total_deaths, death_proportion), names_to = ""category"", values_to = ""count"")"
"0",""
"0","# Filter to include only death_proportion"
"0","df_prop_deaths <- df_prop %>%"
"0","    filter(category == ""death_proportion"")"
"0",""
"0","# Create an area plot of the proportion of deaths by continent"
"0","ggplot(df_prop_deaths, aes(x = date, y = count, fill = continent)) +"
"0","    geom_area(position = 'stack') +"
"0","    scale_fill_manual(values = palette) +"
"0","    labs(x = ""Date"", y = ""Proportion of Deaths"", fill = ""Continent"") +"
"0","    th +"
"0","    labs(title = ""Figure 3: Proportion of COVID-19 deaths to cases by continent over time"")"
